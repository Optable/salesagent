{% extends "base.html" %}

{% block title %}Create Tenant - AdCP Admin{% endblock %}

{% block content %}
<div class="card">
    <h2>Create New Tenant</h2>
    
    {% if error %}
    <div class="alert alert-error">{{ error }}</div>
    {% endif %}
    
    <form method="POST">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="name">Tenant Name *</label>
                <input type="text" id="name" name="name" required placeholder="e.g., New York Times">
            </div>
            
            <div class="form-group">
                <label for="tenant_id">Tenant ID</label>
                <input type="text" id="tenant_id" name="tenant_id" placeholder="Auto-generated from name">
                <small style="color: #666;">Leave blank to auto-generate</small>
            </div>
            
            <div class="form-group">
                <label for="subdomain">Subdomain</label>
                <input type="text" id="subdomain" name="subdomain" placeholder="e.g., nytimes">
                <small style="color: #666;">Access at subdomain.localhost:8080</small>
            </div>
            
            <div class="form-group">
                <label for="billing_plan">Billing Plan</label>
                <select id="billing_plan" name="billing_plan">
                    <option value="standard">Standard</option>
                    <option value="premium">Premium</option>
                    <option value="enterprise">Enterprise</option>
                </select>
            </div>
        </div>
        
        <h3 style="margin-top: 2rem;">Ad Server Adapter</h3>
        
        <div class="form-group">
            <label for="adapter">Primary Adapter</label>
            <select id="adapter" name="adapter" onchange="showAdapterConfig()">
                <option value="mock">Mock (Development)</option>
                <option value="google_ad_manager">Google Ad Manager</option>
                <option value="kevel">Kevel</option>
            </select>
        </div>
        
        <div id="adapter-mock" class="adapter-config">
            <p style="color: #666;">Mock adapter requires no configuration.</p>
        </div>
        
        <div id="adapter-google_ad_manager" class="adapter-config" style="display: none;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label for="gam_network_code">Network Code *</label>
                    <input type="text" id="gam_network_code" name="gam_network_code">
                </div>
                <div class="form-group">
                    <label for="gam_company_id">Company ID</label>
                    <input type="text" id="gam_company_id" name="gam_company_id">
                </div>
            </div>
        </div>
        
        <div id="adapter-kevel" class="adapter-config" style="display: none;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label for="kevel_network_id">Network ID *</label>
                    <input type="text" id="kevel_network_id" name="kevel_network_id">
                </div>
                <div class="form-group">
                    <label for="kevel_api_key">API Key *</label>
                    <input type="text" id="kevel_api_key" name="kevel_api_key">
                </div>
            </div>
        </div>
        
        <h3 style="margin-top: 2rem;">Features</h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="max_daily_budget">Max Daily Budget</label>
                <input type="number" id="max_daily_budget" name="max_daily_budget" value="10000">
            </div>
            
            <div class="form-group" style="display: flex; align-items: center; gap: 1rem;">
                <input type="checkbox" id="human_review" name="human_review" checked>
                <label for="human_review" style="margin: 0;">Require human review for creatives</label>
            </div>
            
            <div class="form-group" style="display: flex; align-items: center; gap: 1rem;">
                <input type="checkbox" id="enable_aee" name="enable_aee" checked>
                <label for="enable_aee" style="margin: 0;">Enable AEE signals</label>
            </div>
        </div>
        
        <div style="margin-top: 2rem;">
            <button type="submit" class="btn">Create Tenant</button>
            <a href="/" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<script>
function showAdapterConfig() {
    const adapter = document.getElementById('adapter').value;
    document.querySelectorAll('.adapter-config').forEach(el => {
        el.style.display = 'none';
    });
    document.getElementById('adapter-' + adapter).style.display = 'block';
}
</script>
{% endblock %}